---
title: Linux 云服务器根分区扩容流程(ext4 示例)
date: 2025-09-01
updated:
tags: [Linux]
categories: Linux
keywords:
description:
top_img: /img/default_top_img.jpg
comments:
cover: /img/cover/df.png
toc:
toc_number:
toc_style_simple:
copyright:
copyright_author:
copyright_author_href:
copyright_url:
copyright_info:
mathjax:
katex:
aplayer:
highlight_shrink:
aside:
abcjs:




---



# Linux 云服务器根分区扩容流程（ext4 示例）

### 1. **云厂商控制台扩容磁盘**

- 登录云服务商（AWS、阿里云、腾讯云等）
- 找到对应实例的 **系统盘 / 数据盘**
- 修改磁盘大小，例如从 **40G → 80G**
- 这一步完成后，虚拟磁盘 `/dev/vda` 就会变大，但分区和文件系统不会自动变大

------

### 2. **确认磁盘和分区情况**

```bash
lsblk
df -h
```

- `lsblk` 会显示磁盘和分区大小
- `df -h` 会显示文件系统挂载的空间大小

例子：

```
vda    80G
└─vda1 40G   /
```

👉 说明磁盘是 80G，但分区还只有 40G

------

### 3. **安装扩容工具**

（Ubuntu/Debian）

```bash
sudo apt update
sudo apt install -y cloud-guest-utils
```

（CentOS/RHEL）

```bash
sudo yum install -y cloud-utils-growpart
```

------

### 4. **扩展分区**

```bash
sudo growpart /dev/vda 1
```

- `/dev/vda` → 磁盘名
- `1` → 分区号（即 `/dev/vda1`）

执行后再看：

```bash
lsblk
```

应该变成：

```
vda    80G
└─vda1 80G   /
```

------

### 5. **确认文件系统类型**

```bash
df -T /
```

可能是：

- `ext4` → 用 `resize2fs`
- `xfs` → 用 `xfs_growfs`

------

### 6. **扩展文件系统**

#### 如果是 ext4：

```bash
sudo resize2fs /dev/vda1
```

#### 如果是 xfs：

```bash
sudo xfs_growfs /
```

------

### 7. **验证结果**

```bash
df -h
```

应该能看到 `/` 从 **40G → 80G** ✅

------

# 🔑 总结

1. 控制台扩容磁盘
2. `lsblk` 看分区大小
3. `growpart` 扩容分区
4. `resize2fs`（ext4）或 `xfs_growfs`（xfs）扩容文件系统
5. `df -h` 验证

